services:
  app.doctrine.data_entity_listener:
    class: AppBundle\Doctrine\DataEntityListener
    tags:
      - { name: doctrine.event_listener, event: prePersist }
      - { name: doctrine.event_listener, event: preUpdate }

  app.listener.ajax_response:
    class: AppBundle\EventListener\AjaxResponseListener
    arguments: [@monolog.logger.php, %kernel.debug%]
    tags: [{ name: kernel.event_subscriber}]

  app.command.organizacja.dodaj:
    class: AppBundle\CommandBus\Organizacja\DodajOrganizacjeCommand
    arguments: [@security.token_storage]

  app.form.type.organizacja:
    class: AppBundle\Form\Type\OrganizacjaType
    tags: [{ name: form.type, alias: organizacja }]

  app.controller.dashboard:
    class: AppBundle\Controller\DashboardController
  app.controller.organizacja:
    class: AppBundle\Controller\OrganizacjaController
    arguments: [@app.command.organizacja.dodaj]
    calls:
      - [setContainer, [@service_container]]